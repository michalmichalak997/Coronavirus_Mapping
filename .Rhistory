library(stringr)
library(plyr)
library(dplyr)
library(ggvis)
library(knitr)
library(XML)
library(methods)
setwd<-getwd()
shell('docker ps')
Sys.sleep(5)
remDr <- remoteDriver(remoteServerAddr = "192.168.99.100", port = 4445L, browserName = "chrome")
Sys.sleep(5)
shell('docker run -d -p 4445:4444 selenium/standalone-chrome')
Sys.sleep(5)
remDr <- remoteDriver(remoteServerAddr = "192.168.99.100", port = 4445L, browserName = "chrome")
Sys.sleep(5)
remDr$open()
shell('docker ps')
Sys.sleep(5)
remDr <- remoteDriver(remoteServerAddr = "192.168.99.100", port = 4445L, browserName = "chrome")
Sys.sleep(5)
remDr$open()
Sys.sleep(5)
remDr$navigate("https://www.gov.pl/web/koronawirus/wykaz-zarazen-koronawirusem-sars-cov-2")
Sys.sleep(2)
webel2<- remDr$findElement(using = "css selector", "#js-pagination-rows > a:nth-child(3)")
Sys.sleep(2)
webel2$sendKeysToElement(list(key="enter"))
Sys.sleep(2)
wojewodztwo <- c("dolnośląskie", "kujawsko-pomorskie", "lubelskie", "lubuskie", "łódzkie", "małopolskie", "mazowieckie", "opolskie", "podkarpackie", "podlaskie", "pomorskie", "śląskie", "świętokrzyskie", "warmińsko-mazurskie", "wielkopolskie", "zachodniopomorskie")
tableElem <- remDr$findElement(using = "css selector", value= "table" )
Sys.sleep(2)
tekst <- tableElem$getElementText()
tekst
przypadki_obserwowane <-str_extract_all(tekst, "[a-z]+ [0-9]+")[[1]]
przypadki_obserwowane
przypadki_obserwowane <-str_extract_all(przypadki_obserwowane, "[0-9]+")[]
przypadki_obserwowane <- as.numeric(przypadki_obserwowane)
kod <- c(02, 04, 06, 08, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32)
ludnosc <- c(2865000, 2060000, 2148000, 1004000, 2466000, 3349000, 5385000, 948808, 2129000, 1193000,
2295000, 4501000, 1263000, 1408000, 3466000, 1679000 )
czas <- (as.POSIXlt(Sys.time()))
czas<- as.character(czas,usetz=TRUE)
czas <- rep(czas, 16)
combined <- data.frame(wojewodztwo, kod, ludnosc, czas, przypadki_obserwowane)
ratio <- sum(combined$przypadki_obserwowane)/sum(combined$ludnosc)
przypadki_oczekiwane<-(combined$ludnosc)*ratio
combined<-dplyr::mutate(combined, przypadki_oczekiwane)
Obserwowane100<-(combined$przypadki_obserwowane/combined$ludnosc)*100000
combined<-dplyr::mutate(combined, Obserwowane100)
SMR<-combined$przypadki_obserwowane/combined$przypadki_oczekiwane
combined<-dplyr::mutate(combined, SMR)
combined
combined$wojewodztwo
mapaw <- st_read("Województwa.shp")
mapaw$JPT_NAZWA_
riskvec<- c( combined$SMR[12],
combined$SMR[8],
combined$SMR[15],
combined$SMR[16],
combined$SMR[13],
combined$SMR[2],
combined$SMR[10],
combined$SMR[1],
combined$SMR[9],
combined$SMR[6],
combined$SMR[11],
combined$SMR[14],
combined$SMR[5],
combined$SMR[7],
combined$SMR[3],
combined$SMR[4] )
mapaw$RelativeRisk <- riskvec
mapaw$RelativeRounded<-as.character(round(mapaw$RelativeRisk, 2))
tm_shape(mapaw) + tm_polygons('RelativeRisk')
combined <- dplyr::mutate(combined, czas)
write.table(combined, file="C:/Users/Michał/Desktop/geology/koronawirus/shiny_corona/data/data2.csv", sep=";", dec = ".", row.names = FALSE)
sum(combined$przypadki_obserwowane)
library("robotstxt")
paths_allowed("https://www.gov.pl/web/koronawirus/wykaz-zarazen-koronawirusem-sars-cov-2")
library(rvest)
library(SpatialEpiApp)
library(foreign)
library(devtools)
library(sf)
library(tmap)
library(rgdal)
library(maps)
library(maptools)
library(sp)
library(stringr)
library(webshot)
library(RCurl)
library(magick)
library(splashr)
library(RSelenium)
library(tidyverse)
library(V8)
library(rvest)
library(stringr)
library(plyr)
library(dplyr)
library(ggvis)
library(knitr)
library(XML)
library(methods)
setwd<-getwd()
shell('docker ps')
Sys.sleep(5)
remDr <- remoteDriver(remoteServerAddr = "192.168.99.100", port = 4445L, browserName = "chrome")
Sys.sleep(5)
shell('docker run -d -p 4445:4444 selenium/standalone-chrome')
Sys.sleep(5)
remDr <- remoteDriver(remoteServerAddr = "192.168.99.100", port = 4445L, browserName = "chrome")
Sys.sleep(5)
remDr$open()
Sys.sleep(5)
remDr$navigate("https://www.gov.pl/web/koronawirus/wykaz-zarazen-koronawirusem-sars-cov-2")
Sys.sleep(2)
webel2<- remDr$findElement(using = "css selector", "#js-pagination-rows > a:nth-child(3)")
Sys.sleep(2)
webel2$sendKeysToElement(list(key="enter"))
Sys.sleep(2)
wojewodztwo <- c("dolnośląskie", "kujawsko-pomorskie", "lubelskie", "lubuskie", "łódzkie", "małopolskie", "mazowieckie", "opolskie", "podkarpackie", "podlaskie", "pomorskie", "śląskie", "świętokrzyskie", "warmińsko-mazurskie", "wielkopolskie", "zachodniopomorskie")
tableElem <- remDr$findElement(using = "css selector", value= "table" )
Sys.sleep(2)
tekst <- tableElem$getElementText()
tekst
przypadki_obserwowane <-str_extract_all(tekst, "[a-z]+ [0-9]+")[[1]]
przypadki_obserwowane
przypadki_obserwowane <-str_extract_all(przypadki_obserwowane, "[0-9]+")[]
przypadki_obserwowane <- as.numeric(przypadki_obserwowane)
kod <- c(02, 04, 06, 08, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32)
ludnosc <- c(2865000, 2060000, 2148000, 1004000, 2466000, 3349000, 5385000, 948808, 2129000, 1193000,
2295000, 4501000, 1263000, 1408000, 3466000, 1679000 )
czas <- (as.POSIXlt(Sys.time()))
czas<- as.character(czas,usetz=TRUE)
czas <- rep(czas, 16)
combined <- data.frame(wojewodztwo, kod, ludnosc, czas, przypadki_obserwowane)
ratio <- sum(combined$przypadki_obserwowane)/sum(combined$ludnosc)
przypadki_oczekiwane<-(combined$ludnosc)*ratio
combined<-dplyr::mutate(combined, przypadki_oczekiwane)
Obserwowane100<-(combined$przypadki_obserwowane/combined$ludnosc)*100000
combined<-dplyr::mutate(combined, Obserwowane100)
SMR<-combined$przypadki_obserwowane/combined$przypadki_oczekiwane
combined<-dplyr::mutate(combined, SMR)
combined
combined$wojewodztwo
mapaw <- st_read("Województwa.shp")
mapaw$JPT_NAZWA_
riskvec<- c( combined$SMR[12],
combined$SMR[8],
combined$SMR[15],
combined$SMR[16],
combined$SMR[13],
combined$SMR[2],
combined$SMR[10],
combined$SMR[1],
combined$SMR[9],
combined$SMR[6],
combined$SMR[11],
combined$SMR[14],
combined$SMR[5],
combined$SMR[7],
combined$SMR[3],
combined$SMR[4] )
mapaw$RelativeRisk <- riskvec
mapaw$RelativeRounded<-as.character(round(mapaw$RelativeRisk, 2))
tm_shape(mapaw) + tm_polygons('RelativeRisk')
combined <- dplyr::mutate(combined, czas)
write.table(combined, file="C:/Users/Michał/Desktop/geology/koronawirus/shiny_corona/data/data2.csv", sep=";", dec = ".", row.names = FALSE)
sum(combined$przypadki_obserwowane)
library("robotstxt")
paths_allowed("https://www.gov.pl/web/koronawirus/wykaz-zarazen-koronawirusem-sars-cov-2")
library(rvest)
library(SpatialEpiApp)
library(foreign)
library(devtools)
library(sf)
library(tmap)
library(rgdal)
library(maps)
library(maptools)
library(sp)
library(stringr)
library(webshot)
library(RCurl)
library(magick)
library(splashr)
library(RSelenium)
library(tidyverse)
library(V8)
library(rvest)
library(stringr)
library(plyr)
library(dplyr)
library(ggvis)
library(knitr)
library(XML)
library(methods)
setwd<-getwd()
shell('docker ps')
Sys.sleep(5)
remDr <- remoteDriver(remoteServerAddr = "192.168.99.100", port = 4445L, browserName = "chrome")
Sys.sleep(5)
shell('docker run -d -p 4445:4444 selenium/standalone-chrome')
Sys.sleep(5)
remDr <- remoteDriver(remoteServerAddr = "192.168.99.100", port = 4445L, browserName = "chrome")
Sys.sleep(5)
remDr$open()
Sys.sleep(5)
remDr$navigate("https://www.gov.pl/web/koronawirus/wykaz-zarazen-koronawirusem-sars-cov-2")
Sys.sleep(2)
webel2<- remDr$findElement(using = "css selector", "#js-pagination-rows > a:nth-child(3)")
Sys.sleep(2)
webel2$sendKeysToElement(list(key="enter"))
Sys.sleep(2)
wojewodztwo <- c("dolnośląskie", "kujawsko-pomorskie", "lubelskie", "lubuskie", "łódzkie", "małopolskie", "mazowieckie", "opolskie", "podkarpackie", "podlaskie", "pomorskie", "śląskie", "świętokrzyskie", "warmińsko-mazurskie", "wielkopolskie", "zachodniopomorskie")
tableElem <- remDr$findElement(using = "css selector", value= "table" )
Sys.sleep(2)
tekst <- tableElem$getElementText()
tekst
przypadki_obserwowane <-str_extract_all(tekst, "[a-z]+ [0-9]+")[[1]]
przypadki_obserwowane
przypadki_obserwowane <-str_extract_all(przypadki_obserwowane, "[0-9]+")[]
przypadki_obserwowane <- as.numeric(przypadki_obserwowane)
kod <- c(02, 04, 06, 08, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32)
ludnosc <- c(2865000, 2060000, 2148000, 1004000, 2466000, 3349000, 5385000, 948808, 2129000, 1193000,
2295000, 4501000, 1263000, 1408000, 3466000, 1679000 )
czas <- (as.POSIXlt(Sys.time()))
czas<- as.character(czas,usetz=TRUE)
czas <- rep(czas, 16)
combined <- data.frame(wojewodztwo, kod, ludnosc, czas, przypadki_obserwowane)
ratio <- sum(combined$przypadki_obserwowane)/sum(combined$ludnosc)
przypadki_oczekiwane<-(combined$ludnosc)*ratio
combined<-dplyr::mutate(combined, przypadki_oczekiwane)
Obserwowane100<-(combined$przypadki_obserwowane/combined$ludnosc)*100000
combined<-dplyr::mutate(combined, Obserwowane100)
SMR<-combined$przypadki_obserwowane/combined$przypadki_oczekiwane
combined<-dplyr::mutate(combined, SMR)
combined
combined$wojewodztwo
mapaw <- st_read("Województwa.shp")
mapaw$JPT_NAZWA_
riskvec<- c( combined$SMR[12],
combined$SMR[8],
combined$SMR[15],
combined$SMR[16],
combined$SMR[13],
combined$SMR[2],
combined$SMR[10],
combined$SMR[1],
combined$SMR[9],
combined$SMR[6],
combined$SMR[11],
combined$SMR[14],
combined$SMR[5],
combined$SMR[7],
combined$SMR[3],
combined$SMR[4] )
mapaw$RelativeRisk <- riskvec
mapaw$RelativeRounded<-as.character(round(mapaw$RelativeRisk, 2))
tm_shape(mapaw) + tm_polygons('RelativeRisk')
combined <- dplyr::mutate(combined, czas)
write.table(combined, file="C:/Users/Michał/Desktop/geology/koronawirus/shiny_corona/data/data2.csv", sep=";", dec = ".", row.names = FALSE)
sum(combined$przypadki_obserwowane)
library("robotstxt")
paths_allowed("https://www.gov.pl/web/koronawirus/wykaz-zarazen-koronawirusem-sars-cov-2")
library(rvest)
library(SpatialEpiApp)
library(foreign)
library(devtools)
library(sf)
library(tmap)
library(rgdal)
library(maps)
library(maptools)
library(sp)
library(stringr)
library(webshot)
library(RCurl)
library(magick)
library(splashr)
library(RSelenium)
library(tidyverse)
library(V8)
library(rvest)
library(stringr)
library(plyr)
library(dplyr)
library(ggvis)
library(knitr)
library(XML)
library(methods)
setwd<-getwd()
shell('docker ps')
Sys.sleep(5)
remDr <- remoteDriver(remoteServerAddr = "192.168.99.100", port = 4445L, browserName = "chrome")
Sys.sleep(5)
shell('docker run -d -p 4445:4444 selenium/standalone-chrome')
Sys.sleep(5)
remDr <- remoteDriver(remoteServerAddr = "192.168.99.100", port = 4445L, browserName = "chrome")
Sys.sleep(5)
remDr$open()
Sys.sleep(5)
remDr$navigate("https://www.gov.pl/web/koronawirus/wykaz-zarazen-koronawirusem-sars-cov-2")
library("robotstxt")
paths_allowed("https://www.gov.pl/web/koronawirus/wykaz-zarazen-koronawirusem-sars-cov-2")
library(rvest)
library(SpatialEpiApp)
library(foreign)
library(devtools)
library(sf)
library(tmap)
library(rgdal)
library(maps)
library(maptools)
library(sp)
library(stringr)
library(webshot)
library(RCurl)
library(magick)
library(splashr)
library(RSelenium)
library(tidyverse)
library(V8)
library(rvest)
library(stringr)
library(plyr)
library(dplyr)
library(ggvis)
library(knitr)
library(XML)
library(methods)
setwd<-getwd()
shell('docker ps')
Sys.sleep(5)
remDr <- remoteDriver(remoteServerAddr = "192.168.99.100", port = 4445L, browserName = "chrome")
Sys.sleep(5)
shell('docker run -d -p 4445:4444 selenium/standalone-chrome')
Sys.sleep(5)
remDr <- remoteDriver(remoteServerAddr = "192.168.99.100", port = 4445L, browserName = "chrome")
Sys.sleep(5)
remDr$open()
Sys.sleep(5)
remDr$navigate("https://www.gov.pl/web/koronawirus/wykaz-zarazen-koronawirusem-sars-cov-2")
Sys.sleep(2)
webel2<- remDr$findElement(using = "css selector", "#js-pagination-rows > a:nth-child(3)")
Sys.sleep(2)
webel2$sendKeysToElement(list(key="enter"))
Sys.sleep(2)
wojewodztwo <- c("dolnośląskie", "kujawsko-pomorskie", "lubelskie", "lubuskie", "łódzkie", "małopolskie", "mazowieckie", "opolskie", "podkarpackie", "podlaskie", "pomorskie", "śląskie", "świętokrzyskie", "warmińsko-mazurskie", "wielkopolskie", "zachodniopomorskie")
tableElem <- remDr$findElement(using = "css selector", value= "table" )
Sys.sleep(2)
tekst <- tableElem$getElementText()
tekst
przypadki_obserwowane <-str_extract_all(tekst, "[a-z]+ [0-9]+")[[1]]
przypadki_obserwowane
przypadki_obserwowane <-str_extract_all(przypadki_obserwowane, "[0-9]+")[]
przypadki_obserwowane <- as.numeric(przypadki_obserwowane)
kod <- c(02, 04, 06, 08, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32)
ludnosc <- c(2865000, 2060000, 2148000, 1004000, 2466000, 3349000, 5385000, 948808, 2129000, 1193000,
2295000, 4501000, 1263000, 1408000, 3466000, 1679000 )
czas <- (as.POSIXlt(Sys.time()))
czas<- as.character(czas,usetz=TRUE)
czas <- rep(czas, 16)
combined <- data.frame(wojewodztwo, kod, ludnosc, czas, przypadki_obserwowane)
ratio <- sum(combined$przypadki_obserwowane)/sum(combined$ludnosc)
przypadki_oczekiwane<-(combined$ludnosc)*ratio
combined<-dplyr::mutate(combined, przypadki_oczekiwane)
Obserwowane100<-(combined$przypadki_obserwowane/combined$ludnosc)*100000
combined<-dplyr::mutate(combined, Obserwowane100)
SMR<-combined$przypadki_obserwowane/combined$przypadki_oczekiwane
combined<-dplyr::mutate(combined, SMR)
combined
combined$wojewodztwo
mapaw <- st_read("Województwa.shp")
mapaw$JPT_NAZWA_
riskvec<- c( combined$SMR[12],
combined$SMR[8],
combined$SMR[15],
combined$SMR[16],
combined$SMR[13],
combined$SMR[2],
combined$SMR[10],
combined$SMR[1],
combined$SMR[9],
combined$SMR[6],
combined$SMR[11],
combined$SMR[14],
combined$SMR[5],
combined$SMR[7],
combined$SMR[3],
combined$SMR[4] )
mapaw$RelativeRisk <- riskvec
mapaw$RelativeRounded<-as.character(round(mapaw$RelativeRisk, 2))
tm_shape(mapaw) + tm_polygons('RelativeRisk')
combined <- dplyr::mutate(combined, czas)
write.table(combined, file="C:/Users/Michał/Desktop/geology/koronawirus/shiny_corona/data/data2.csv", sep=";", dec = ".", row.names = FALSE)
sum(combined$przypadki_obserwowane)
shiny::runApp('C:/Users/Michał/Desktop/geology/koronawirus/shiny_corona')
deployApp()
deployApp()
write.table(combined, file="C:/Users/Michał/Desktop/geology/koronawirus/shiny_corona/data/data2.csv", sep=";", dec = ".", row.names = FALSE)
write.table(combined, file="C:/Users/Michał/Desktop/geology/koronawirus/shiny_corona/data/data2.csv", sep=";", dec = ".", row.names = FALSE)
sum(combined$przypadki_obserwowane)
runApp('C:/Users/Michał/Desktop/geology/koronawirus/shiny_corona')
deployApp()
runApp('C:/Users/Michał/Desktop/geology/koronawirus/shiny_corona')
deployApp()
library("robotstxt")
paths_allowed("https://www.gov.pl/web/koronawirus/wykaz-zarazen-koronawirusem-sars-cov-2")
library(rvest)
library(SpatialEpiApp)
library(foreign)
library(devtools)
library(sf)
library(tmap)
library(rgdal)
library(maps)
library(maptools)
library(sp)
library(stringr)
library(webshot)
library(RCurl)
library(magick)
library(splashr)
library(RSelenium)
library(tidyverse)
library(V8)
library(rvest)
library(stringr)
library(plyr)
library(dplyr)
library(ggvis)
library(knitr)
library(XML)
library(methods)
setwd<-getwd()
shell('docker ps')
Sys.sleep(5)
remDr <- remoteDriver(remoteServerAddr = "192.168.99.100", port = 4445L, browserName = "chrome")
Sys.sleep(5)
shell('docker run -d -p 4445:4444 selenium/standalone-chrome')
Sys.sleep(5)
remDr <- remoteDriver(remoteServerAddr = "192.168.99.100", port = 4445L, browserName = "chrome")
Sys.sleep(5)
remDr$open()
Sys.sleep(5)
remDr$navigate("https://www.gov.pl/web/koronawirus/wykaz-zarazen-koronawirusem-sars-cov-2")
Sys.sleep(2)
webel2<- remDr$findElement(using = "css selector", "#js-pagination-rows > a:nth-child(3)")
Sys.sleep(2)
webel2$sendKeysToElement(list(key="enter"))
Sys.sleep(2)
wojewodztwo <- c("dolnośląskie", "kujawsko-pomorskie", "lubelskie", "lubuskie", "łódzkie", "małopolskie", "mazowieckie", "opolskie", "podkarpackie", "podlaskie", "pomorskie", "śląskie", "świętokrzyskie", "warmińsko-mazurskie", "wielkopolskie", "zachodniopomorskie")
tableElem <- remDr$findElement(using = "css selector", value= "table" )
Sys.sleep(2)
tekst <- tableElem$getElementText()
tekst
przypadki_obserwowane <-str_extract_all(tekst, "[a-z]+ [0-9]+")[[1]]
przypadki_obserwowane
przypadki_obserwowane <-str_extract_all(przypadki_obserwowane, "[0-9]+")[]
przypadki_obserwowane <- as.numeric(przypadki_obserwowane)
kod <- c(02, 04, 06, 08, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32)
ludnosc <- c(2865000, 2060000, 2148000, 1004000, 2466000, 3349000, 5385000, 948808, 2129000, 1193000,
2295000, 4501000, 1263000, 1408000, 3466000, 1679000 )
czas <- (as.POSIXlt(Sys.time()))
czas<- as.character(czas,usetz=TRUE)
czas <- rep(czas, 16)
combined <- data.frame(wojewodztwo, kod, ludnosc, czas, przypadki_obserwowane)
ratio <- sum(combined$przypadki_obserwowane)/sum(combined$ludnosc)
przypadki_oczekiwane<-(combined$ludnosc)*ratio
combined<-dplyr::mutate(combined, przypadki_oczekiwane)
Obserwowane100<-(combined$przypadki_obserwowane/combined$ludnosc)*100000
combined<-dplyr::mutate(combined, Obserwowane100)
SMR<-combined$przypadki_obserwowane/combined$przypadki_oczekiwane
combined<-dplyr::mutate(combined, SMR)
combined
combined$wojewodztwo
mapaw <- st_read("Województwa.shp")
mapaw$JPT_NAZWA_
riskvec<- c( combined$SMR[12],
combined$SMR[8],
combined$SMR[15],
combined$SMR[16],
combined$SMR[13],
combined$SMR[2],
combined$SMR[10],
combined$SMR[1],
combined$SMR[9],
combined$SMR[6],
combined$SMR[11],
combined$SMR[14],
combined$SMR[5],
combined$SMR[7],
combined$SMR[3],
combined$SMR[4] )
mapaw$RelativeRisk <- riskvec
mapaw$RelativeRounded<-as.character(round(mapaw$RelativeRisk, 2))
tm_shape(mapaw) + tm_polygons('RelativeRisk')
combined <- dplyr::mutate(combined, czas)
write.table(combined, file="C:/Users/Michał/Desktop/geology/koronawirus/shiny_corona/data/data2.csv", sep=";", dec = ".", row.names = FALSE)
sum(combined$przypadki_obserwowane)
runApp('C:/Users/Michał/Desktop/geology/koronawirus/shiny_corona')
deployApp()
write.table(combined, file="data2.csv", sep=";", dec = ".", row.names = FALSE)
runApp('C:/Users/Michał/Desktop/geology/koronawirus/shiny_corona')
runApp('C:/Users/Michał/Desktop/geology/koronawirus/shiny_corona')
deployApp()
n
deployApp()
